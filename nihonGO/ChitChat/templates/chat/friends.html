{% extends "components/wrapper.html" %}

{% block content %}
    <a href="{% url 'messages' %}" class="underline text-crimson font-body">&larr; Back</a>
    <div class="flex justify-around mb-12">
        <div class="flex flex-col">
            <h2 class="text-center text-black font-outfit text-heading font-bold mb-6">My Friends</h2>
            {% if friends|length == 0 %}
            <p class="text-center font-outfit text-black text-opacity-50">so empty...</p>
            {% else %}
            <ul class="flex flex-col space-y-4 mb-12">
                {% for friend in friends %}
                    <li class="flex space-x-20 items-center">
                        <div class="flex items-center space-x-6">
                            <img src="{{ friend.friend.theme_profile.avatar.url }}" alt="" class="w-16 rounded-full">
                            <div class="flex flex-col">
                                <p class="text-body text-black font-DMSans font-semibold">@{{ friend.friend.username }}</p>
                                {% if friend.friend.theme_profile.bio == '' %}
                                    <p class="text-sm text-opacity-50 text-black font-DMSans">user has no bio... that's awkward</p>
                                {% else %}
                                    <p class="text-sm text-opacity-50 text-black font-DMSans">{{ friend.friend.theme_profile.bio }}</p>
                                {% endif %}
                            </div>
                        </div>
                        <form method="post" action="{% url 'remove_friend' friend.id %}">
                            {% csrf_token %}
                            <button type="submit"><span class="material-symbols-outlined hover:text-crimson">delete</span></button>
                        </form>
                    </li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
        <div class="flex flex-col">
            <h2 class="text-center text-black font-outfit text-heading font-bold mb-6">Friend Requests</h2>
            {% if friend_requests_received|length == 0 %}
            <p class="text-center font-outfit text-black text-opacity-50">so empty...</p>
            {% else %}
            <ul class="flex flex-col space-y-4">
                {% for request in friend_requests_received %}
                <li>
                    <div class="flex justify-between">
                        <div class="flex items-center space-x-6">
                            <img src="{{ request.user.theme_profile.avatar.url }}" alt="" class="w-16 rounded-full">
                            <div class="flex flex-col">
                                <p class="text-body text-black font-DMSans font-semibold">@{{ request.user.username }}</p>
                                {% if request.user.theme_profile.bio == '' %}
                                    <p class="text-sm text-opacity-50 text-black font-DMSans">user has no bio... that's awkward</p>
                                {% else %}
                                    <p class="text-sm text-opacity-50 text-black font-DMSans">{{ request.user.theme_profile.bio }}</p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="flex flex-col">
                            <form method="post" action="{% url 'accept_friend_request' request.id %}">
                                {% csrf_token %}
                                <button type="submit" class="accept-btn"><span class="material-symbols-outlined hover:text-crimson transition-all duration-250 ease-in-out">close</span></button>
                            </form>
                            <form method="post" action="{% url 'reject_friend_request' request.id %}">
                                {% csrf_token %}
                                <button type="submit" class="reject-btn"><span class="material-symbols-outlined hover:text-green-500 transition-all duration-250 ease-in-out">check</span></button>
                            </form>
                        </div>
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
    </div>
{% endblock %}